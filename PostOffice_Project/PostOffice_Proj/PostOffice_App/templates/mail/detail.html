{% extends 'base.html' %}
{% block title %}Mail {{ mail.tracking_code }} â€” Mailly{% endblock %}
{% block content %}
<div class="card">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div>
      <h3 style="margin:0">{{ mail.tracking_code }}</h3>
      <div class="muted">Status: {{ mail.get_status_display }}</div>
    </div>
    <div style="display:flex;gap:10px">
      {% if perms.mail.change_mailitem %}
        <a class="btn" href="{% url 'mail:edit' mail.id %}">Edit</a>
      {% endif %}
      <a class="btn btn-primary" href="#">Print Label</a>
    </div>
  </div>

  <div style="display:flex;gap:18px;margin-top:14px">
    <div style="flex:1">
      <h4>Details</h4>
      <table class="table">
        <tr><th>Sender</th><td class="muted">{{ mail.sender.get_full_name }}</td></tr>
        <tr><th>Recipient</th><td>{{ mail.recipient.get_full_name }}</td></tr>
        <tr><th>Weight</th><td class="muted">{{ mail.weight }} kg</td></tr>
        <tr><th>Declared value</th><td class="muted">{{ mail.declared_value }}</td></tr>
      </table>
    </div>
    <div style="width:320px">
      <h4>Tracking</h4>
      <div class="card">
        {% for step in mail.tracking_steps %}
          <div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.02)">
            <div>
              <div style="font-weight:600">{{ step.title }}</div>
              <div class="muted" style="font-size:13px">{{ step.note }}</div>
            </div>
            <div class="muted" style="font-size:12px">{{ step.timestamp }}</div>
          </div>
        {% empty %}
          <div class="muted">No tracking events yet</div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}